<!--
대구 도시철도 노선도 벡터 이미지
© 2023 Hyeon.js, All rights reserved.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="user-scalable=no width=device-width" />
<meta name="description" content="Dtro Map" />
<title>
Dtro Map
</title>
</head>
<style>
@font-face {
 font-family: "NanumSquare";
 src: url("./NanumSquareR.ttf");
 font-weight: normal;
}
.bold {
  font-family: NanumSquareBold;
}
.left {
  text-anchor: start;
}
.right {
  text-anchor: end;
}
body {
  font-family: NanumSquare;
  margin: 0px;
  font-size: 32px;
  text-anchor: middle;
  dominant-baseline: middle;
}
polyline {
  stroke-width: 15;
  stroke-linejoin: round;
  stroke-linecap: round;
}
circle {
  fill: #FFFFFF;
  stroke : #000000;
  stroke-width: 3;
}
text {
  font-size: 32px;
}
text.trn {
  font-weight: bold;
}
line {
  stroke-width: 7;
  stroke-linejoin: round;
  stroke-linecap: round;
}
text.legend {
  font-size: 24px;
}
</style>
<body bgcolor=#FFFFFF>
<div>
<svg width="100%" viewBox="0 0 900 3300" id="map">

<!-- 1호선 -->
<polyline points="
    850,50 850,1600 800,1650 700,1650 650,1700 650,1750 650,1800 500,1950 100,1950 50,2000 50,3250
	" fill="none" stroke="#D93F5C" />
<!-- 2호선 -->
<polyline points="
    50,550 50,1700 100,1750 450,1750 800,1750 850,1800 850,3150
	" fill="none" stroke="#00AA80" />
<!-- 3호선 -->
<polyline points="
    450,50 450,2950
	" fill="none" stroke="#FFB100" />
<text class=line_name style='fill:#FFB100;' x=1250 y=1050>3호선</text>

<!-- 범례 -->
<line x1=50 y1=50 x2=100 y2=50 fill="none" stroke="#D93F5C" />
<text x=110 y=50 class="left legend">1호선</text>
<line x1=50 y1=100 x2=100 y2=100 fill="none" stroke="#00AA80" />
<text x=110 y=100 class="left legend">2호선</text>
<line x1=50 y1=150 x2=100 y2=150 fill="none" stroke="#FFB100" />
<text x=110 y=150 class="left legend">3호선</text>

</svg>
</div>
<script>

var pos = [[
    {x: 850, y: 50, stn: "안심", dir: "right"},
    {x: 850, y: 150, stn: "각산", dir: "right"},
    {x: 850, y: 250, stn: "반야월", dir: "right"},
    {x: 850, y: 350, stn: "신기", dir: "right"},
    {x: 850, y: 450, stn: "율하", dir: "right"},
    {x: 850, y: 550, stn: "용계", dir: "right"},
    {x: 850, y: 650, stn: "방촌", dir: "right"},
    {x: 850, y: 750, stn: "해안", dir: "right"},
    {x: 850, y: 850, stn: "동촌", dir: "right"},
    {x: 850, y: 950, stn: "아양교", dir: "right"},
    {x: 850, y: 1050, stn: "동구청", dir: "right"},
    {x: 850, y: 1150, stn: "동대구역", dir: "right"},
    {x: 850, y: 1250, stn: "신천", dir: "right"},
    {x: 850, y: 1350, stn: "칠성시장", dir: "right"},
    {x: 850, y: 1450, stn: "대구역", dir: "right"},
    {x: 850, y: 1550, stn: "중앙로", dir: "right"},
    {x: 650, y: 1750, stn: "반월당", dir: "left"},
    {x: 450, y: 1950, stn: "남산", dir: "left", lot: true},
    {x: 250, y: 1950, stn: "교대", dir: "center", lot: true},
    {x: 50, y: 2050, stn: "영대병원", dir: "left"},
    {x: 50, y: 2150, stn: "현충로", dir: "left"},
    {x: 50, y: 2250, stn: "안지랑", dir: "left"},
    {x: 50, y: 2350, stn: "대명", dir: "left"},
    {x: 50, y: 2450, stn: "서부정류장", dir: "left"},
    {x: 50, y: 2550, stn: "송현", dir: "left"},
    {x: 50, y: 2650, stn: "월촌", dir: "left"},
    {x: 50, y: 2750, stn: "상인", dir: "left"},
    {x: 50, y: 2850, stn: "월배", dir: "left"},
    {x: 50, y: 2950, stn: "진천", dir: "left"},
    {x: 50, y: 3050, stn: "대곡", dir: "left"},
    {x: 50, y: 3150, stn: "화원", dir: "left"},
    {x: 50, y: 3250, stn: "설화명곡", dir: "left"}
], [
    {x: 50, y: 550, stn: "문양", dir: "left"},
    {x: 50, y: 650, stn: "다사", dir: "left"},
    {x: 50, y: 750, stn: "대실", dir: "left"},
    {x: 50, y: 850, stn: "강창", dir: "left"},
    {x: 50, y: 950, stn: "계명대", dir: "left"},
    {x: 50, y: 1050, stn: "성서산업단지", dir: "left"},
    {x: 50, y: 1150, stn: "이곡", dir: "left"},
    {x: 50, y: 1250, stn: "용산", dir: "left"},
    {x: 50, y: 1350, stn: "죽전", dir: "left"},
    {x: 50, y: 1450, stn: "감삼", dir: "left"},
    {x: 50, y: 1550, stn: "두류", dir: "left"},
    {x: 50, y: 1650, stn: "내당", dir: "left"},
    {x: 250, y: 1750, stn: "반고개", dir: "center", lot: true},
    {x: 450, y: 1750, stn: "청라언덕", dir: "left", lot: true},
    {x: 650, y: 1750, stn: "반월당", dir: "left", lot: true},
    {x: 850, y: 1850, stn: "경대병원", dir: "right"},
    {x: 850, y: 1950, stn: "대구은행", dir: "right"},
    {x: 850, y: 2050, stn: "범어", dir: "right"},
    {x: 850, y: 2150, stn: "수성구청", dir: "right"},
    {x: 850, y: 2250, stn: "만촌", dir: "right"},
    {x: 850, y: 2350, stn: "담티", dir: "right"},
    {x: 850, y: 2450, stn: "연호", dir: "right"},
    {x: 850, y: 2550, stn: "대공원", dir: "right"},
    {x: 850, y: 2650, stn: "고산", dir: "right"},
    {x: 850, y: 2750, stn: "신매", dir: "right"},
    {x: 850, y: 2850, stn: "사월", dir: "right"},
    {x: 850, y: 2950, stn: "정평", dir: "right"},
    {x: 850, y: 3050, stn: "임당", dir: "right"},
    {x: 850, y: 3150, stn: "영남대", dir: "right"}
], [
    {x: 450, y: 50, stn: "칠곡경대병원", dir: "left"},
    {x: 450, y: 150, stn: "학정", dir: "left"},
    {x: 450, y: 250, stn: "팔거", dir: "left"},
    {x: 450, y: 350, stn: "동천", dir: "left"},
    {x: 450, y: 450, stn: "칠곡운암", dir: "left"},
    {x: 450, y: 550, stn: "구암", dir: "left"},
    {x: 450, y: 650, stn: "태전", dir: "left"},
    {x: 450, y: 750, stn: "매천", dir: "left"},
    {x: 450, y: 850, stn: "매천시장", dir: "left"},
    {x: 450, y: 950, stn: "팔달", dir: "left"},
    {x: 450, y: 1050, stn: "공단", dir: "left"},
    {x: 450, y: 1150, stn: "만평", dir: "left"},
    {x: 450, y: 1250, stn: "팔달시장", dir: "left"},
    {x: 450, y: 1350, stn: "원대", dir: "left"},
    {x: 450, y: 1450, stn: "북구청", dir: "left"},
    {x: 450, y: 1550, stn: "달성공원", dir: "left"},
    {x: 450, y: 1650, stn: "서문시장", dir: "left"},
    {x: 450, y: 1750, stn: "청라언덕", dir: "left"},
    {x: 450, y: 1850, stn: "명덕", dir: "left"},
    {x: 450, y: 1950, stn: "남산", dir: "left"},
    {x: 450, y: 2050, stn: "건들바위", dir: "left"},
    {x: 450, y: 2150, stn: "대봉교", dir: "left"},
    {x: 450, y: 2250, stn: "수성시장", dir: "left"},
    {x: 450, y: 2350, stn: "수성구민운동장", dir: "left"},
    {x: 450, y: 2450, stn: "어린이회관", dir: "left"},
    {x: 450, y: 2550, stn: "황금", dir: "left"},
    {x: 450, y: 2650, stn: "수성못", dir: "left"},
    {x: 450, y: 2750, stn: "지산", dir: "left"},
    {x: 450, y: 2850, stn: "범물", dir: "left"},
    {x: 450, y: 2950, stn: "용지", dir: "left"}
]];
var trn = ["반월당", "청라언덕", "남산"];

var map = document.getElementById("map");
var src = '';
for(var n=0;n<3;n++){
pos[n].forEach((e) => {
src += '<circle cx="' + e.x + '" cy="' + e.y + '" r="11" onClick="onIconClicked(\'' + e.stn + '\');" />';
if (trn.includes(e.stn)) return;
var x = e.x, y = e.y;
if (e.dir == 'left') x += 30;
if (e.dir == 'right') x -= 30;
if (e.dir == 'center') y += 50;
src += '<text x=' + x + ' y=' + y + ' onClick="onTextClicked(this);" class=' + e.dir + '>' + e.stn + '</text>';
});
}
var m = [16, 13, 19];
for(var n=0;n<trn.length;n++){
src += '<text x=' + (pos[n][m[n]].x + 20) + ' y=' + (pos[n][m[n]].y + 40) + ' onClick="onTextClicked(this);" class="left trn">' + pos[n][m[n]].stn + '</text>';
}
map.innerHTML += src;
var mapData = map.innerHTML;


function updateData(data) {
data = JSON.parse(data);
var map = document.getElementById("map");
var src = '';
data.forEach((e, i) => {
    e.forEach((e, j) => {
    	var x = pos[i][j].x, y = pos[i][j].y;
        y -= 20;
        if (e.up) {
        	var file = 'up';
        	x -= 30;
        	src += '<image xlink:href="images/' + file + '.png" x="' + x + '" y="' + y + '" width="20px" />';
        }
        x = pos[i][j].x;
        if (e.dn) {
        	var file = 'down';
        	x += 10;
        	src += '<image xlink:href="images/' + file + '.png" x="' + x + '" y="' + y + '" width="20px" />';
        }
    });
});
map.innerHTML = mapData + src;
}

function onIconClicked(station) {
alert('아이콘: ' + station);
}

function onTextClicked(element) {
alert('글자: ' + element.innerHTML.replace(/(<([^>]+)>)/g, ''));
}
</script>
</body>
</html>
